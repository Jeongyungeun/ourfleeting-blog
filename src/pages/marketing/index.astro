---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import { Image } from "astro:assets";
import FormattedDate from "../../components/FormattedDate.astro";

const allPosts = (await getCollection("marketing")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout title="Marketing" description="마케팅 콘텐츠">
	<div class="container-blog py-8 md:py-12">
		<!-- Page Header -->
		<div class="page-header">
			<h1 class="page-title">Marketing</h1>
			<p class="page-description">마케팅 전략과 인사이트를 공유합니다</p>
		</div>

		<!-- Posts Grid -->
		<div class="posts-grid animate-stagger">
			{allPosts.map((post) => (
				<a href={`/marketing/${post.id}/`} class="post-card group">
					{post.data.heroImage && (
						<div class="post-card-image">
							<Image
								src={post.data.heroImage}
								alt={post.data.title}
								width={600}
								height={450}
							/>
						</div>
					)}
					<div class="post-card-content">
						<div class="flex items-center gap-2 mb-3">
							<span class="tag tag-marketing">Marketing</span>
						</div>
						<h3 class="post-card-title">{post.data.title}</h3>
						<p class="post-card-excerpt">{post.data.description}</p>
						<div class="post-card-meta">
							<FormattedDate date={post.data.pubDate} />
						</div>
					</div>
				</a>
			))}
		</div>

		<!-- Empty State -->
		{allPosts.length === 0 && (
			<div class="text-center py-16">
				<p class="text-text-secondary">아직 작성된 글이 없습니다.</p>
			</div>
		)}
	</div>
</Layout>
